{% extends "basic_templates/no-scroll.html" %}

{% block title %}Create post{% endblock %}

{% block main%}
<div class="hero-body hero is-paddingless">
  <div class="column card hero-head" style="padding : 30px">
    <form action="/create_post" method="post">
      <div class="field">
        <input id="post-title" class="input" type="text" name="title" placeholder="Title">
      </div>
      <div class="field">
        <textarea id="post-body" class="textarea" name="body" rows="8" cols="80" placeholder="Text"></textarea>
      </div>
      {% if success %}
      <div class="tags is-centered is-marginless">
        <span class="tag is-success is-light">{{success}}</span>
      </div>
      {% endif %}
      <div class="field">
        <button class="button is-primary" type="submit" id="submit-button" disabled>Submit</button>
      </div>
    </form>
  </div>
</div>
{% endblock %}

{% block script %}
  <script>

    document.addEventListener("DOMContentLoaded", () => {
      const submitButton = document.getElementById("submit-button");
      const postBody = document.getElementById("post-body");
      const postTitle = document.getElementById("post-title");

      if (submitButton && postBody && postTitle){
        postBody.addEventListener("input", () => {
          if (postTitle.value.trim() !== "" && postBody.value.trim() !== "") {
            submitButton.disabled = false;
          } else {
            submitButton.disabled = true;
          }
        });
        postTitle.addEventListener("input", () => {
          if (postTitle.value.trim() !== "" && postBody.value.trim() !== "") {
            submitButton.disabled = false;
          } else {
            submitButton.disabled = true;
          }
        });
      }
    })
  </script>
{% endblock %}
